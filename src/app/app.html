<app-nav-bar></app-nav-bar>
<div *ngIf="isBrowser">
	<div class="ag-theme-alpine-dark" style="height: 80vh; width: 100%;">
		<div *ngIf="loading$ | async" class="text-center p-3">
			<div class="spinner-border text-light" role="status">
				<span class="visually-hidden">Loading...</span>
			</div>
		</div>
		<ag-grid-angular [rowData]="rowData" [columnDefs]="columnDefs" [pagination]="true" [paginationPageSize]="15"
			[paginationPageSizeSelector]="false" (rowClicked)="onRowClicked($event)">
		</ag-grid-angular>
	</div>
</div>

<ng-template #content let-offcanvas>
	<div class="offcanvas-header">
		<h4 class="offcanvas-title">Export Item</h4>
		<button type="button" class="btn-close btn-close-white" aria-label="Close"
			(click)="offcanvas.dismiss('Cross click')"></button>
	</div>
	<div class="offcanvas-body">
			<h6>Item Details:</h6>
			Name: {{ selectedItem?.name }} <br>
			Brand: {{ selectedItem?.brand }} <br>
			Category: {{ selectedItem?.category }} <br>
			Color: {{ selectedItem?.color }} <br>
			Model Number: {{ selectedItem?.modelNumber }} <br>
			Price: {{ selectedItem?.price }} <br>
			Rating: {{ selectedItem?.rating }} <br>
			Release Year: {{ selectedItem?.releaseYear }} <br>
			Stock: {{ selectedItem?.stock }} <br>
		<div class="mt-3">
			<h6>Export Format:</h6>

			<div class="d-flex flex-wrap gap-3 align-items-center">
				<div class="form-check form-check-inline text-light">
					<input class="form-check-input" type="radio" id="jsonRadio" name="exportType" value="json"
						[(ngModel)]="selectedExportType">
					<label class="form-check-label" for="jsonRadio">JSON</label>
				</div>

				<div class="form-check form-check-inline text-light">
					<input class="form-check-input" type="radio" id="excelRadio" name="exportType" value="excel"
						[(ngModel)]="selectedExportType">
					<label class="form-check-label" for="excelRadio">Excel (.xlsx)</label>
				</div>

				<div class="form-check form-check-inline text-light">
					<input class="form-check-input" type="radio" id="csvRadio" name="exportType" value="csv"
						[(ngModel)]="selectedExportType">
					<label class="form-check-label" for="csvRadio">CSV</label>
				</div>

				<div class="form-check form-check-inline text-light">
					<input class="form-check-input" type="radio" id="txtRadio" name="exportType" value="txt"
						[(ngModel)]="selectedExportType">
					<label class="form-check-label" for="txtRadio">Text (.txt)</label>
				</div>
				<div class="d-flex justify-content-end gap-2 mt-4">
					<button type="button" class="btn btn-outline-light" (click)="offcanvas.dismiss()">
						Cancel
					</button>
					<button type="button" class="btn btn-primary" (click)="exportItem(); offcanvas.close()">
						Export
					</button>
				</div>
			</div>
		</div>
	</div>
</ng-template>